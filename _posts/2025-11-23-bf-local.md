---
layout: post
title:  "build betaflight and run configurators locally"
lang: en
tags: [en, betaflight configurator, esc configurator, blackbox explorer, local, ]
category: tutorial
published: true
---

here I use Ubuntu as the docker host, the rest is done on Windows11

- build and run Betaflight Configurator locally

```
git clone https://github.com/betaflight/betaflight-configurator.git
cd betaflight-configurator
git checkout 2025.12-maintenance
git pull
cat .nvmrc
nvm ls
nvm install 20.10.0
nvm use 20.10.0
npm install yarn -g
yarn install
yarn build
yarn preview
```

- blackbox log viewer also:

```
git clone https://github.com/betaflight/blackbox-log-viewer.git
cd blackbox-log-viewer
git checkout master
nvm install 20.19.0
nvm use 20.19.0
npm install yarn -g
yarn install
yarn build
yarn preview
```

- it is possible to build the firmware locally, without giving the information to the betaflight build server. 

```
mkdir ~/betaflight-docker
```

create the build environment with docker:

```
tee ~/betaflight-docker/Dockerfile << 'EOF'
FROM ubuntu:24.04

ENV DEBIAN_FRONTEND=noninteractive
ENV TZ=Asia/Shanghai

apt -y update
apt -y full-upgrade
apt -y install build-essential git curl clang-18 python3 python-is-python3

RUN mkdir -p /opt

RUN mkdir -p /opt/betaflight
WORKDIR /opt/betaflight

ENV ARM_SDK_DIR="/usr/"

EOF
```

example of options from a cloud build:

```
Options	
0	"CLOUD_BUILD"
1	"USE_ACRO_TRAINER"
2	"USE_CAMERA_CONTROL"
3	"USE_DSHOT"
4	"USE_GPS"
5	"USE_GPS_PLUS_CODES"
6	"USE_LED_STRIP"
7	"USE_OSD"
8	"USE_OSD_SD"
9	"USE_PINIO"
10	"USE_SERIALRX"
11	"USE_SERIALRX_CRSF"
12	"USE_TELEMETRY"
13	"USE_TELEMETRY_CRSF"
14	"USE_VTX"
```

build the firmware:

```
cd ~

git clone https://github.com/betaflight/betaflight.git
cd betaflight
git branch -a
git checkout 2025.12-maintenance
git reset --hard
git pull

docker run --rm -it -v `pwd`:/opt/betaflight $(docker build -q ~/betaflight-docker) /bin/bash
chmod +rw -R ../betaflight && chown -R `whoami` ../betaflight
rm -rf ./obj
make clean
make configs
make arm_sdk_install

make JHEF435 EXTRA_FLAGS="-DUSE_ACRO_TRAINER -DUSE_CAMERA_CONTROL -DUSE_GPS -DUSE_GPS_PLUS_CODES -DUSE_LED_STRIP -DUSE_OSD_SD -DUSE_TELEMETRY -DUSE_TELEMETRY_CRSF " DEBUG=DBG -j
``` 

then copy the ~/betaflight/obj/xxx.hex on the host to somewhere else



- the ESC configurator can also be [built locally](https://github.com/stylesuxx/esc-configurator) the same way as Betaflight Configurator.

```
git clone https://github.com/stylesuxx/esc-configurator.git
cd esc-configurator
git checkout develop
nvm install 18.16.0
nvm use 18.16.0
npm install yarn -g
yarn install
yarn build
yarn start

```

- I couldn't come up with a one-click solutuon for building Bluejay firmware locally as it is [using Keil A51 assembler toolchain that requires registration](https://github.com/bird-sanctuary/bluejay/wiki/Development). the other way is to download prebuilt hex files from their github:

```
mkdir -p ~/bluejay
tee ~/bluejay/bluejaydownloader.sh << 'EOF'
#!/bin/bash

if [ "$#" -ne 2 ]; then
    echo "Usage: $0 <TARGET> <PWM>"
    echo "Example: $0 G-H-30 48"
    exit 1
fi

TARGET="$1"
PWM="$2"
URL="https://github.com/bird-sanctuary/bluejay/releases/download/v0.21.1-RC1/$(echo "$TARGET" | tr '-' '_')_${PWM}_v0.21.1-RC1.hex"
curl -L -O "$URL"
EOF
```

```
chmod u+x ~/bluejay/bluejaydownloader.sh
cd ~/bluejay
./bluejaydownloader.sh G-H-30 48
```

- ExpressLRS firmware is pulled from github and compiled locally by ELRS configurator, which is [downloaded as a binary](https://github.com/ExpressLRS/ExpressLRS-Configurator/releases/download/v1.7.11/ExpressLRS-Configurator-Setup-1.7.11.exe), and can also be built locally. on windows:

```
git clone https://github.com/ExpressLRS/ExpressLRS-Configurator.git
cd ExpressLRS-Configurator
cat .nvmrc
nvm install 18.20.3
nvm use 18.20.3
npm install yarn -g
yarn install --frozen-lockfile
yarn start
```

ELRS firmware repo can be cloned locally, but the configurator will still download paltformio and other dependencies from internet the first time:

```
git clone https://github.com/ExpressLRS/ExpressLRS.git
```

select `local` in the configurator settings, and point to the `src` directory in local firmware repo path.

## references


- https://www.betaflight.com/docs/development/building/Building-in-Ubuntu
- https://github.com/betaflight/docker-betaflight-build/blob/master/Dockerfile